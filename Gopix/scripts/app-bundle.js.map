{"version":3,"sources":["app.js","environment.js","main.js","components/board.js","components/gopix.js","resources/index.js","resources/binding-behaviors/keystrokes.js"],"names":["App","eventAggregator","handleKeyInput","event","keycode","keyCode","which","keys","LEFT","ea","publish","UP","RIGHT","DOWN","message","activate","document","addEventListener","deactivate","removeEventListener","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","BoardCustomElement","GopixCustomElement","pixClass","pix","cycles","name","subscribe","move","response","direction","duplicate","dx","dy","newPixes","maxY","gopix","length","maxX","y","x","thisPix","toplay","$row","$pix","children","push","addClass","removeClass","newPix","i","turn","reset","clickPix","console","log","Keystrokes","myKeypressCallback","keypressInput","bind","window","e"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { inject, bindable } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport $ from 'jquery';\n\n@inject(EventAggregator)\nexport class App {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.message = 'Gopix Raiders';\n        this.keys = {\n            LEFT: 37,\n            UP: 38,\n            RIGHT: 39,\n            DOWN: 40\n        };\n    }\n\n    activate() {\n        document.addEventListener('keydown', this.handleKeyInput, true);\n    }\n\n    deactivate() {\n        document.removeEventListener('keydown', this.handleKeyInput);\n    }\n\n    handleKeyInput = (event) => {\n        var keycode = event.keyCode || event.which; // also for cross-browser compatible\n        switch (keycode) {\n            case this.keys.LEFT:\n                this.ea.publish('keyPressed', \"LEFT\");\n                break;\n            case this.keys.UP:\n                this.ea.publish('keyPressed', \"UP\");\n                break;\n            case this.keys.RIGHT:\n                this.ea.publish('keyPressed', \"RIGHT\");\n                break;\n            case this.keys.DOWN:\n                this.ea.publish('keyPressed', \"DOWN\");\n                break;\n            default:\n                this.ea.publish('keyPressed', \"SOMEKEY\");\n        }\n    }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { inject, bindable } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class BoardCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n    }\n\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\nimport $ from 'jquery';\n\n@inject(EventAggregator)\nexport class GopixCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.ea.subscribe('keyPressed', response => {\n            this.move(response);\n        });\n        this.move = function(direction) {\n            // console.log(direction);\n\n            switch (direction) {\n                case 'LEFT':\n                    this.duplicate(-1, 0);\n                    break;\n                case 'RIGHT':\n                    this.duplicate(1, 0);\n                    break;\n                case 'UP':\n                    this.duplicate(0, -1);\n                    break;\n                case 'DOWN':\n                    this.duplicate(0, 1);\n                    break;\n                default:\n\n            }\n        }\n        this.duplicate = function(dx, dy) {\n            let newPixes = [];\n            let maxY = this.gopix.length;\n            let maxX = this.gopix[0].length;\n            // let currentColorPixes = [];\n            // Gather pixes of current color with cycles = 3\n            for (let y = 0; y < maxY; y++) {\n                for (let x = 0; x < maxX; x++) {\n                    let thisPix = this.gopix[y][x];\n                    if (thisPix.name === this.toplay) {\n                        // currentColorPixes.push(thisPix);\n                        let $row = $($('.row')[y]);\n                        let $pix = $($row.children('.pix')[x]);\n\n                        if (thisPix.cycles > 0) {\n                            newPixes.push([\n                                [(x + dx + maxX) % maxX],\n                                [(y + dy + maxY) % maxY]\n                            ]);\n                        }\n                        if (thisPix.cycles > 0) {\n                            thisPix.cycles--;\n                            $pix.addClass('shade'+thisPix.cycles);\n                        }\n                        if (thisPix.cycles === 0) {\n                            thisPix.name === 'empty';\n                            $pix.removeClass('white black shade1 shade2 shade3').addClass('empty');\n                        }\n                    }\n                }\n            }\n            let newPix = {\n                \"name\": this.toplay,\n                \"cycles\": 3\n            }\n            // console.log(this.gopix);\n            // Fade existing pixes\n            // for (var i = 0; i < currentColorPixes.length; i++) {\n            //     currentColorPixes[i]\n            // }\n            // Apply new pixes\n            for (var i = 0; i < newPixes.length; i++) {\n                this.gopix[newPixes[i][1]][newPixes[i][0]] = newPix;\n                let $row = $($('.row')[newPixes[i][1]]);\n                let $pix = $($row.children('.pix')[newPixes[i][0]]);\n                $pix.removeClass('empty').addClass(this.toplay);\n            }\n        }\n        // switch color\n        this.turn = function() {\n            this.toplay = (this.toplay === 'black') ? 'white' : 'black';\n        }\n        this.toplay = 'white';\n        this.gopix = [];\n        // setup the board\n        this.reset = function() {\n            let newPix = {\n                \"name\": \"empty\",\n                \"cycles\": 0\n            }\n            for (let y = 0; y < 33; y++) {\n                this.gopix.push([]);\n                for (let x = 0; x < 33; x++) {\n                    this.gopix[y].push(newPix);\n                }\n            }\n            this.gopix[11][11] = {\n                \"name\": \"white\",\n                \"cycles\": 3\n            };\n            this.gopix[21][21] = {\n                \"name\": \"black\",\n                \"cycles\": 3\n            };\n        };\n        this.reset();\n        // console.table(this.gopix);\n    }\n\n    pixClass = function(pix) {\n        switch (pix.cycles) {\n            case 3:\n                return pix.name;\n                break;\n            case 2:\n                return pix.name + 'shade1';\n                break;\n            case 1:\n                return pix.name + 'shade2';\n                break;\n            default:\n                return 'empty';\n\n        }\n        return pix.name;\n    }\n\n    clickPix(pix) {\n        this.turn();\n        if (pix === 'empty') {\n            this.turn();\n            pix = this.toplay;\n        }\n        console.log(pix);\n    };\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class Keystrokes {\n    constructor() {\n        this.myKeypressCallback = this.keypressInput.bind(this);\n    }\n\n    activate() {\n        window.addEventListener('keypress', this.myKeypressCallback, false);\n    }\n\n    deactivate() {\n        window.removeEventListener('keypress', this.myKeypressCallback);\n    }\n\n    // This function is called by the aliased method\n    keypressInput(e) {\n        console.log(e);\n    }\n}\n"],"sourceRoot":"../src"}