{"version":3,"sources":["app.js","environment.js","main.js","components/board.js","resources/index.js","resources/binding-behaviors/keystrokes.js","components/gopix.js","/Volumes/Users 3Tb/Users/Esger/Sites/AshWare/GOPIX RAIDERS/Gopix/src/components/header.js"],"names":["App","eventAggregator","handleKeyInput","event","keycode","keyCode","which","keys","left","ea","publish","up","right","down","message","activate","document","addEventListener","deactivate","removeEventListener","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","BoardCustomElement","player","subscribe","response","logoClass","Keystrokes","myKeypressCallback","keypressInput","bind","window","e","console","log","GopixCustomElement","move","toplay","oponent","maxX","maxY","maxStrength","playerStrength","gopix","pixStyle","pix","strength","turn","temp","direction","step","getNewPixes","dx","dy","newPixes","abortMove","y","x","thisPix","name","newX","newY","newPix","push","weakenPixes","$row","$pix","children","css","removeClass","addClass","drawNewPixes","i","length","reset","setup","attached"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\nimport $ from 'jquery';\n\n@inject(EventAggregator)\nexport class App {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.message = 'Gopix Raiders';\n        this.keys = {\n            'left': 37,\n            'up': 38,\n            'right': 39,\n            'down': 40\n        };\n    }\n\n    activate() {\n        document.addEventListener('keydown', this.handleKeyInput, true);\n    }\n\n    deactivate() {\n        document.removeEventListener('keydown', this.handleKeyInput);\n    }\n\n    handleKeyInput = (event) => {\n        var keycode = event.keyCode || event.which; // also for cross-browser compatible\n        switch (keycode) {\n            case this.keys.left:\n                this.ea.publish('keyPressed', \"left\");\n                break;\n            case this.keys.up:\n                this.ea.publish('keyPressed', \"up\");\n                break;\n            case this.keys.right:\n                this.ea.publish('keyPressed', \"right\");\n                break;\n            case this.keys.down:\n                this.ea.publish('keyPressed', \"down\");\n                break;\n            default:\n                this.ea.publish('keyPressed', \"somekey\");\n        }\n    }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class BoardCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.player = 'white';\n        this.ea.subscribe('player', response => {\n            this.player = response;\n        });\n    }\n\n    logoClass() {\n        return this.player;\n    }\n\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class Keystrokes {\n    constructor() {\n        this.myKeypressCallback = this.keypressInput.bind(this);\n    }\n\n    activate() {\n        window.addEventListener('keypress', this.myKeypressCallback, false);\n    }\n\n    deactivate() {\n        window.removeEventListener('keypress', this.myKeypressCallback);\n    }\n\n    // This function is called by the aliased method\n    keypressInput(e) {\n        console.log(e);\n    }\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\nimport $ from 'jquery';\n\n@inject(EventAggregator)\nexport class GopixCustomElement {\n\n    constructor(eventAggregator) {\n\n        this.ea = eventAggregator;\n\n        this.ea.subscribe('keyPressed', response => {\n            this.move(response);\n        });\n\n        this.toplay = 'white';\n        this.oponent = 'black';\n\n        this.maxX = 22;\n        this.maxY = 22;\n\n        this.maxStrength = 11;\n\n        this.playerStrength = {\n            'white': 5,\n            'black': 5\n        }\n\n        this.gopix = [];\n\n    }\n\n    pixStyle(pix) {\n        return {\n            'borderWidth' : pix.strength + 'px'\n        };\n    }\n\n    turn() {\n        if (this.playerStrength[this.toplay] < this.maxStrength) {\n            this.playerStrength[this.toplay]++\n        }\n        console.log(this.playerStrength);\n        // switch color\n        let temp = this.oponent;\n        this.oponent = this.toplay;\n        this.toplay = temp;\n        this.ea.publish('player', this.toplay);\n    }\n\n    move(direction) {\n        switch (direction) {\n            case 'left':\n                this.step(-1, 0);\n                break;\n            case 'right':\n                this.step(1, 0);\n                break;\n            case 'up':\n                this.step(0, -1);\n                break;\n            case 'down':\n                this.step(0, 1);\n                break;\n            default:\n        }\n    }\n\n    getNewPixes(dx, dy) {\n        let newPixes = [];\n        let abortMove = false;\n        for (let y = 0; y < this.maxY; y++) {\n            for (let x = 0; x < this.maxX; x++) {\n                let thisPix = this.gopix[y][x];\n                if (thisPix.name === this.toplay) {\n                    if (thisPix.strength > 0) {\n                        let newX = x + dx;\n                        let newY = y + dy;\n                        if (!(newX < 0 || newX >= this.maxX || newY < 0 || newY >= this.maxY)) {\n                            let newPix = [newX,newY];\n                            if (this.gopix[newY][newX].name == 'empty') {\n                                newPixes.push(newPix);\n                            } else {\n                                if (this.gopix[newY][newX].name == this.oponent) {\n                                    if (this.gopix[newY][newX].strength < thisPix.strength) {\n                                        newPixes.push(newPix);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return newPixes;\n    }\n\n    weakenPixes() {\n        for (let y = 0; y < this.maxY; y++) {\n            for (let x = 0; x < this.maxX; x++) {\n                let thisPix = this.gopix[y][x];\n                if (thisPix.name === this.toplay) {\n                    let $row = $($('.row')[y]);\n                    let $pix = $($row.children('.pix')[x]);\n                    if (thisPix.strength > 1) {\n                        thisPix.strength--;\n                        $pix.css(this.pixStyle(thisPix));\n                    } else {\n                        thisPix.name = 'empty';\n                        $pix.removeClass(this.toplay).addClass('empty');\n                    }\n                }\n            }\n        }\n    }\n\n    drawNewPixes(newPixes){\n        let newPix = {\n            \"name\": this.toplay,\n            \"strength\": this.playerStrength[this.toplay]\n        }\n        for (var i = 0; i < newPixes.length; i++) {\n            this.gopix[newPixes[i][1]][newPixes[i][0]] = newPix;\n            let $row = $($('.row')[newPixes[i][1]]);\n            let $pix = $($row.children('.pix')[newPixes[i][0]]);\n            $pix.removeClass('empty white black').addClass(this.toplay);\n            $pix.css(this.pixStyle(newPix));\n        }\n    }\n\n    step(dx, dy) {\n        let newPixes = this.getNewPixes(dx, dy);\n        console.log(newPixes);\n        if (newPixes.length) {\n            this.weakenPixes();\n            this.drawNewPixes(newPixes);\n            this.turn();\n        } else {\n            console.log('illegal move');\n        }\n    }\n\n    // setup the board\n    reset() {\n        let newPix = {\n            \"name\": \"empty\",\n            \"strength\": 0\n        }\n        for (let y = 0; y < this.maxX; y++) {\n            this.gopix.push([]);\n            for (let x = 0; x < this.maxY; x++) {\n                this.gopix[y].push(newPix);\n            }\n        }\n        this.gopix[7][7] = {\n            \"name\": \"white\",\n            \"strength\": this.playerStrength['white']\n        };\n        this.gopix[14][14] = {\n            \"name\": \"black\",\n            \"strength\": this.playerStrength['black']\n        };\n    }\n\n    setup() {\n        let newPixes = [[7,7]];\n        console.log(newPixes);\n        this.drawNewPixes(newPixes);\n        this.turn();\n        newPixes = [[14,14]];\n        console.log(newPixes);\n        this.drawNewPixes(newPixes);\n        this.turn();\n    }\n\n    attached(){\n        this.reset();\n        this.setup();\n    }\n\n}\n",null],"sourceRoot":"../src"}